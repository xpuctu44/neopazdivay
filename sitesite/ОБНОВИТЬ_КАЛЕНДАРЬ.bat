@echo off
echo ========================================
echo ОБНОВЛЕНИЕ КАЛЕНДАРНОГО ПЛАНИРОВАНИЯ
echo ========================================

echo.
echo 1. Останавливаем сервер...
for /f "tokens=5" %%a in ('netstat -aon ^| findstr :8000') do (
    echo Останавливаем процесс %%a
    taskkill /f /pid %%a
)

echo.
echo 2. Ждем 3 секунды...
timeout /t 3 /nobreak

echo.
echo 3. Запускаем сервер с обновленным календарем...
cd neopazdivay
python -m uvicorn app.main:app --host 0.0.0.0 --port 8000 --reload

echo.
echo ========================================
echo ГОТОВО! Календарное планирование обновлено!
echo ========================================
echo.
echo Теперь в разделе "Планирование" вы увидите:
echo - Календарную таблицу с числами месяца
echo - Список всех сотрудников (включая администраторов)
echo - Возможность кликать на клеточки для создания смен
echo - Редактирование и удаление существующих смен
echo.
pause

