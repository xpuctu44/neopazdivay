@echo off
chcp 65001 >nul
echo ========================================
echo –û–¢–ü–†–ê–í–ö–ê –ò–ó–ú–ï–ù–ï–ù–ò–ô –ù–ê GITHUB
echo ========================================
echo.

cd /d "%~dp0"

echo [1/6] –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å git —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è...
git status 2>nul
if %errorlevel% neq 0 (
    echo ‚ö†Ô∏è  Git —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –Ω–µ –Ω–∞–π–¥–µ–Ω!
    echo –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –Ω–æ–≤—ã–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π...
    git init
    echo ‚úÖ Git —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω
)

echo.
echo [2/6] –î–æ–±–∞–≤–ª—è–µ–º –≤—Å–µ —Ñ–∞–π–ª—ã –≤ –∏–Ω–¥–µ–∫—Å...
git add .
if %errorlevel% neq 0 (
    echo ‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ —Ñ–∞–π–ª–æ–≤!
    pause
    exit /b 1
)
echo ‚úÖ –í—Å–µ —Ñ–∞–π–ª—ã –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤ –∏–Ω–¥–µ–∫—Å

echo.
echo [3/6] –°–æ–∑–¥–∞–µ–º –∫–æ–º–º–∏—Ç...
set commit_msg="Update: Added restore scripts and improvements - %date% %time%"
git commit -m %commit_msg%
if %errorlevel% neq 0 (
    echo ‚ö†Ô∏è  –ù–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π –¥–ª—è –∫–æ–º–º–∏—Ç–∞ –∏–ª–∏ –æ—à–∏–±–∫–∞ –∫–æ–º–º–∏—Ç–∞
    echo –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å...
    git status
)

echo.
echo [4/6] –ü—Ä–æ–≤–µ—Ä—è–µ–º —É–¥–∞–ª–µ–Ω–Ω—ã–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π...
git remote -v 2>nul
if %errorlevel% neq 0 (
    echo ‚ö†Ô∏è  –£–¥–∞–ª–µ–Ω–Ω—ã–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω!
    echo.
    echo –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –¥–æ–±–∞–≤—å—Ç–µ —É–¥–∞–ª–µ–Ω–Ω—ã–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:
    echo git remote add origin https://github.com/–≤–∞—à-username/–≤–∞—à-—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π.git
    echo.
    echo –ò–ª–∏ —É–∫–∞–∂–∏—Ç–µ URL –≤–∞—à–µ–≥–æ GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è:
    set /p repo_url="–í–≤–µ–¥–∏—Ç–µ URL —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è: "
    if not "!repo_url!"=="" (
        git remote add origin !repo_url!
        echo ‚úÖ –£–¥–∞–ª–µ–Ω–Ω—ã–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –¥–æ–±–∞–≤–ª–µ–Ω
    ) else (
        echo ‚ùå URL –Ω–µ —É–∫–∞–∑–∞–Ω, –≤—ã—Ö–æ–¥
        pause
        exit /b 1
    )
)

echo.
echo [5/6] –ü–æ–ª—É—á–∞–µ–º –ø–æ—Å–ª–µ–¥–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å —Å–µ—Ä–≤–µ—Ä–∞...
git pull origin main --rebase 2>nul
if %errorlevel% neq 0 (
    echo ‚ö†Ô∏è  –í–µ—Ç–∫–∞ main –Ω–µ –Ω–∞–π–¥–µ–Ω–∞, –ø–æ–ø—Ä–æ–±—É–µ–º master...
    git pull origin master --rebase 2>nul
    if %errorlevel% neq 0 (
        echo ‚ö†Ô∏è  –ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è, –ø—Ä–æ–¥–æ–ª–∂–∞–µ–º –±–µ–∑ pull
    )
)

echo.
echo [6/6] –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏—è –Ω–∞ GitHub...
git push origin main 2>nul
if %errorlevel% neq 0 (
    echo ‚ö†Ô∏è  –û—à–∏–±–∫–∞ –ø—Ä–∏ –ø—É—à–µ –≤ main, –ø–æ–ø—Ä–æ–±—É–µ–º master...
    git push origin master 2>nul
    if %errorlevel% neq 0 (
        echo ‚ö†Ô∏è  –ü–æ–ø—Ä–æ–±—É–µ–º —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å upstream –∏ –∑–∞–ø—É—à–∏—Ç—å...
        git push -u origin main 2>nul
        if %errorlevel% neq 0 (
            git push -u origin master 2>nul
            if %errorlevel% neq 0 (
                echo ‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è!
                echo.
                echo –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:
                echo - –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π URL —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
                echo - –ù–µ—Ç –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞
                echo - –ü—Ä–æ–±–ª–µ–º—ã —Å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–µ–π
                echo.
                echo –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –∫–æ–º–∞–Ω–¥—ã –≤—Ä—É—á–Ω—É—é:
                echo git remote -v
                echo git push origin main
                echo.
                pause
                exit /b 1
            )
        )
    )
)

echo.
echo ========================================
echo ‚úÖ –ò–ó–ú–ï–ù–ï–ù–ò–Ø –£–°–ü–ï–®–ù–û –û–¢–ü–†–ê–í–õ–ï–ù–´!
echo ========================================
echo.
echo –û—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:
echo - –í–û–°–°–¢–ê–ù–û–í–ò–¢–¨_–ü–û–°–õ–ï–î–ù–Æ–Æ_–†–ê–ë–û–ß–£–Æ_–í–ï–†–°–ò–Æ.bat
echo - –ë–´–°–¢–†–û–ï_–í–û–°–°–¢–ê–ù–û–í–õ–ï–ù–ò–ï.bat  
echo - –°–û–ó–î–ê–¢–¨_–†–ï–ó–ï–†–í–ù–£–Æ_–ö–û–ü–ò–Æ.bat
echo - –í—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–∞
echo.
echo üåê –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤–∞—à —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –Ω–∞ GitHub!
echo.
pause
